var j=Object.defineProperty,V=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var $=(e,t,n)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,y=(e,t)=>{for(var n in t||(t={}))G.call(t,n)&&$(e,n,t[n]);if(B)for(var n of B(t))K.call(t,n)&&$(e,n,t[n]);return e},C=(e,t)=>V(e,q(t));import{d as U,r as z,o as a,c as l,w as T,v as D,a as i,b as W,u as E,G as H,_ as J,z as X,q as Q,e as g,f as Z,g as _,h,i as Y,j as F,k as v,n as f,l as ee,m as te,p as ne,F as x,s as M,t as k,x as S,y as se,A as oe,B as re,C as ie}from"./vendor.4811b7c0.js";const ae=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}};ae();const le="modulepreload",N={},ce="/",A=function(t,n){return!n||n.length===0?t():Promise.all(n.map(r=>{if(r=`${ce}${r}`,r in N)return;N[r]=!0;const s=r.endsWith(".css"),o=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${o}`))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":le,s||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),s)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())},ue=i("div",{"i-carbon-campsite":"","text-4xl":"","inline-block":""},null,-1),de=i("p",null,[i("a",{rel:"noreferrer",href:"https://github.com/antfu/vitesse-lite",target:"_blank"}," Vitesse Lite ")],-1),he=i("p",null,[i("em",{"text-sm":"",op75:""},"Opinionated Vite Starter Template")],-1),me=i("div",{"py-4":""},null,-1),_e=["onKeydown"],pe=["disabled"],fe=U({setup(e){const t=z(""),n=E(),r=()=>{t.value&&n.push(`/hi/${encodeURIComponent(t.value)}`)};return(s,o)=>(a(),l("div",null,[ue,de,he,me,T(i("input",{id:"input","onUpdate:modelValue":o[0]||(o[0]=c=>t.value=c),placeholder:"What's your name?",type:"text",autocomplete:"false",p:"x-4 y-2",w:"250px",text:"center",bg:"transparent",border:"~ rounded gray-200 dark:gray-700",outline:"none active:none",onKeydown:W(r,["enter"])},null,40,_e),[[D,t.value]]),i("div",null,[i("button",{class:"m-3 text-sm btn",disabled:!t.value,onClick:r}," Go ",8,pe)])]))}}),ge=[{name:"all",path:"/:all(.*)*",component:()=>A(()=>import("./_...all_.35e7a589.js"),["assets/_...all_.35e7a589.js","assets/vendor.4811b7c0.js"]),props:!0},{name:"index",path:"/",component:fe,props:!0},{name:"hi-name",path:"/hi/:name",component:()=>A(()=>import("./_name_.4c9efc45.js"),["assets/_name_.4c9efc45.js","assets/_name_.b5e2eca8.css","assets/vendor.4811b7c0.js"]),props:!0},{name:"tune-name",path:"/tune/:name",component:()=>A(()=>import("./_name_.7b77985d.js"),["assets/_name_.7b77985d.js","assets/_name_.280cc69c.css","assets/vendor.4811b7c0.js"]),props:!0}];var b=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n};const be={name:"OptionsMenu",components:{Menu:H,MenuButton:J,MenuItem:X,MenuItems:Q},inject:["context"],data(){return{open:!1,transpose:0}},computed:{playChords(){var e,t;return!!((t=(e=this.context)==null?void 0:e.settings)==null?void 0:t.enableChords)},showTabs(){var e,t;return!!((t=(e=this.context)==null?void 0:e.settings)==null?void 0:t.showTabs)},instrument(){var e,t;return(t=(e=this.context)==null?void 0:e.settings)==null?void 0:t.instrument}},watch:{transpose(e){this.$bus.emit("setTranspose",e)}},methods:{toggleChords(){this.$bus.emit("toggleChords")},toggleTabs(){this.$bus.emit("toggleTabs")},toggleMenu(){this.open=!this.open},setInstrument(e){this.$bus.emit("setInstrument",e)}}},ye={key:0,class:"i-tabler-dots"},ve={key:1,class:"i-tabler-x"},xe={class:"flex items-center flex-shrink-0"},Ce={key:0,class:"i-tabler-square"},ke={key:1,class:"i-tabler-square-check"},Ae=i("label",{class:"mx-1 text-xs"},"Play Chords",-1),Te={class:"flex items-center"},we={key:0,class:"i-tabler-square"},Be={key:1,class:"i-tabler-square-check"},$e=i("label",{class:"mx-1 text-xs"},"Show Tabs",-1),Me={class:"mt-2 text-xs"},Se=F(" Lead Instrument "),Ne={class:"p-2 rounded border-1"},Oe={key:0,class:"i-tabler-circle-dot"},De={key:1,class:"i-tabler-circle"},Ee=i("label",{class:"mx-1 text-xs"},"Fiddle",-1),Fe={key:0,class:"i-tabler-circle-dot"},Ie={key:1,class:"i-tabler-circle"},Le=i("label",{class:"mx-1 text-xs"},"Piano",-1),Re={key:0,class:"i-tabler-circle-dot"},Pe={key:1,class:"i-tabler-circle"},je=i("label",{class:"mx-1 text-xs"},"Accordion",-1),Ve={key:0,class:"i-tabler-circle-dot"},qe={key:1,class:"i-tabler-circle"},Ge=i("label",{class:"mx-1 text-xs"},"Flute",-1),Ke={key:0,class:"i-tabler-circle-dot"},Ue={key:1,class:"i-tabler-circle"},ze=i("label",{class:"mx-1 text-xs"},"Banjo",-1),We={class:"flex items-center text-xs mt-2"},He=i("label",{class:""},"Transpose",-1);function Je(e,t,n,r,s,o){const c=g("MenuButton"),u=g("MenuItem"),d=g("MenuItems"),p=g("Menu");return a(),Z(p,{as:"div",class:"position-relative flex items-center"},{default:_(()=>[h(c,{class:"",onClick:o.toggleMenu},{default:_(()=>[s.open?(a(),l("div",ve)):(a(),l("div",ye))]),_:1},8,["onClick"]),T(h(d,{static:"",as:"div",class:"menu-items w-35 position-absolute bottom-10 right-0 border-1 border-black text-white dark:text-black dark:border-white shadow rounded-6px p-2 dark:bg-gray-300 bg-gray-700"},{default:_(()=>[h(u,{onClick:o.toggleChords},{default:_(()=>[i("div",xe,[o.playChords?(a(),l("div",ke)):(a(),l("div",Ce)),Ae])]),_:1},8,["onClick"]),h(u,{onClick:o.toggleTabs},{default:_(()=>[i("div",Te,[o.showTabs?(a(),l("div",Be)):(a(),l("div",we)),$e])]),_:1},8,["onClick"]),h(u,{as:"template"},{default:_(()=>[i("div",Me,[Se,i("div",Ne,[i("button",{class:"flex items-center",onClick:t[0]||(t[0]=m=>o.setInstrument("FIDDLE"))},[o.instrument==="FIDDLE"?(a(),l("div",Oe)):(a(),l("div",De)),Ee]),i("button",{class:"flex items-center",onClick:t[1]||(t[1]=m=>o.setInstrument("PIANO"))},[o.instrument==="PIANO"?(a(),l("div",Fe)):(a(),l("div",Ie)),Le]),i("button",{class:"flex items-center",onClick:t[2]||(t[2]=m=>o.setInstrument("ACCORDION"))},[o.instrument==="ACCORDION"?(a(),l("div",Re)):(a(),l("div",Pe)),je]),i("button",{class:"flex items-center",onClick:t[3]||(t[3]=m=>o.setInstrument("FLUTE"))},[o.instrument==="FLUTE"?(a(),l("div",Ve)):(a(),l("div",qe)),Ge]),i("button",{class:"flex items-center",onClick:t[4]||(t[4]=m=>o.setInstrument("BANJO"))},[o.instrument==="BANJO"?(a(),l("div",Ke)):(a(),l("div",Ue)),ze])])])]),_:1}),h(u,{as:"template"},{default:_(()=>[i("div",We,[He,T(i("input",{"onUpdate:modelValue":t[5]||(t[5]=m=>s.transpose=m),type:"number",max:"12",min:"-12",class:"ms-auto rounded w-48px p-2px ps-6px border-1 bg-transparent"},null,512),[[D,s.transpose]])])]),_:1})]),_:1},512),[[Y,s.open]])]),_:1})}var Xe=b(be,[["render",Je]]);const Qe={displayLoop:!0,displayRestart:!0,displayPlay:!0,displayProgress:!0,displayWarp:!0,displayClock:!0},Ze={PIANO:0,ACCORDION:21,FLUTE:73,BANJO:105,FIDDLE:110};function Ye(){this.onStart=function(){document.querySelector(".notation svg")},this.beatSubdivisions=2,this.onEvent=function(e){if(e.measureStart&&e.left===null)return;const t=document.querySelectorAll(".notation svg .highlight");for(let n=0;n<t.length;n++)t[n].classList.remove("highlight");for(let n=0;n<e.elements.length;n++){const r=e.elements[n];for(let s=0;s<r.length;s++)r[s].classList.add("highlight")}},this.onFinished=function(){const e=document.querySelectorAll("svg .highlight");for(let t=0;t<e.length;t++)e[t].classList.remove("highlight")}}const et={name:"SynthController",inject:["context"],data(){return{synthControl:void 0,midiBuffer:void 0,audioContext:void 0,cursorControl:new Ye,oldBuffers:{synthControl:[],midiBuffer:[],audioContext:[]}}},computed:{renderedTune(){var e;return(e=this.context)==null?void 0:e.renderedTune},instrument(){var e,t;return(t=(e=this.context)==null?void 0:e.settings)==null?void 0:t.instrument},enableChords(){var e,t;return(t=(e=this.context)==null?void 0:e.settings)==null?void 0:t.enableChords}},watch:{renderedTune(){this.init(!0)},instrument(){this.init(!0)},enableChords(){this.init(!0)}},mounted(){this.$bus.emit("setSynthController",this),this.init(),this.$bus.on("seek",async e=>{const t=Array.isArray(e)?e[0]:e;await this.init(!0);const r=this.synthControl.timer.lastMoment,s=t/r;this.synthControl.setProgress(s),this.synthControl.midiBuffer.seek(s),this.synthControl.play()})},methods:{setBrowserSupport(){this.$bus.emit("setBrowserSupport",v.synth.supportsAudio())},init(e=!1){return new Promise(t=>{if(this.synthControl&&this.synthControl.pause(),document.querySelector(".abcjs-midi-tempo"),window.AudioContext=window.AudioContext||window.webkitAudioContext||navigator.mozAudioContext||navigator.msAudioContext,this.synthControl=new v.synth.SynthController,this.synthControl.load(this.$refs.audio,this.cursorControl,Qe),this.setBrowserSupport(),this.audioContext=v.synth.activeAudioContext()||new window.AudioContext,!this.renderedTune)return;const n=y({},this.renderedTune[0]);!n||(this.midiBuffer?this.midiBuffer.stop():this.midiBuffer=new v.synth.CreateSynth,this.midiBuffer.init({visualObj:n}).then(()=>{this.synthControl.setTune(n,e,{chordsOff:!this.enableChords,program:Ze[this.instrument]}).then(()=>{t()})}))})}}},tt={class:"synth-controller flex flex-row"},nt={ref:"audio",class:"synth-controller flex-grow"};function st(e,t,n,r,s,o){const c=Xe;return a(),l("div",tt,[i("div",nt,null,512),h(c)])}var ot=b(et,[["render",st]]);const rt={name:"Footer",inject:["context"]};function it(e,t,n,r,s,o){var u,d;const c=ot;return((u=o.context)==null?void 0:u.browserSupportsAudio)?(a(),l("div",{key:0,class:f(["footer border-t-4 border-gray-300 dark:border-gray-700 shadow bg-hex-121212 color-white",{show:(d=o.context)==null?void 0:d.renderedTune}])},[h(c)],2)):ee("",!0)}var at=b(rt,[["render",it],["__scopeId","data-v-36d14c11"]]);const I=te(),lt=ne(I);const ct={class:"fw-semibold text-sm mb-4"},ut=["onClick"],dt=["onClick"],ht={name:"TheNavMenu",inject:["context"],props:["open","tunes"],computed:{tunesByLetter(){let e=[...this.tunes];return e=e.map((t,n)=>C(y({},t),{index:n})).sort((t,n)=>t.title.join("").localeCompare(n.title.join(""))).reduce((t,n,r)=>{const s=this.getFirstLetter(n.title);return t[s]||(t[s]=[]),t[s].push(n),t},{}),Object.entries(e)},selectedTune(){var e;return(e=this.context)==null?void 0:e.selectedTune}},methods:{getValue(e){return e.join("")},getFirstLetter(e){return this.getValue(e).charAt(0).toUpperCase()}}},mt=Object.assign(ht,{emits:["hide"],setup(e,{emit:t}){const n=E(),r=o=>{o!==void 0&&n.push(`/tune/${o}`)},s=o=>{r(o),t("hide")};return(o,c)=>(a(),l("div",{class:f(["the-nav-menu mb-0 border-r-4 border-gray-300 dark:border-gray-700 p-4 bg-white dark:bg-hex-121212 z-1000 bottom-0",{open:e.open,closed:!e.open,"!bottom-42px":!!o.context.renderedTune}])},[(a(!0),l(x,null,M(o.tunesByLetter,u=>(a(),l("div",{key:u[0]},[i("div",ct,[F(k(u[0])+" ",1),(a(!0),l(x,null,M(u[1],d=>{var p,m;return a(),l(x,null,[i("button",{class:f(["tune-title text-lg font-serif block lt-lg:display-none text-left",{selected:d.fileName===((p=o.selectedTune)==null?void 0:p.fileName)}]),onClick:P=>r(d.index)},k(o.getValue(d.title)),11,ut),i("button",{class:f(["tune-title text-lg font-serif block lg:display-none text-left",{selected:d.fileName===((m=o.selectedTune)==null?void 0:m.fileName)}]),onClick:P=>s(d.index)},k(o.getValue(d.title)),11,dt)],64)}),256))])]))),128))],2))}});var L=b(mt,[["__scopeId","data-v-7b33e0a8"]]);const _t={class:"title-bar border-b-4 border-gray-300 dark:border-gray-700 p-2 flex flex-row shadow items-center"},pt=i("div",{class:"font-serif text-xl"}," Steve's Fiddle Tunes \u{1F3BB}\u{1FA95} ",-1),ft={key:0,"i-carbon-moon":""},gt={key:1,"i-carbon-sun":""},bt={name:"TheTitleBar",props:["isMenuOpen"],emits:["toggle-nav-menu"],methods:{toggleNavMenu(){this.$emit("toggle-nav-menu")}}},yt=Object.assign(bt,{setup(e){return(t,n)=>(a(),l("div",_t,[i("button",{class:f(["text-xl mr-2",{"i-mdi-menu":!e.isMenuOpen,"i-mdi-close":e.isMenuOpen}]),onClick:n[0]||(n[0]=(...r)=>t.toggleNavMenu&&t.toggleNavMenu(...r))},null,2),pt,i("button",{class:"icon-btn !outline-none ml-auto",onClick:n[1]||(n[1]=r=>S(lt)())},[S(I)?(a(),l("div",ft)):(a(),l("div",gt))])]))}});var O=[{key:"title",identifier:"T"},{key:"meter",identifier:"M"},{key:"quarterNote",identifier:"L"},{key:"key",identifier:"K"},{key:"quantize",identifier:"Q"},{key:"notes",identifier:"N"},{key:"history",identifier:"H"},{key:"composer",identifier:"C"},{key:"type",identifier:"R"},{key:"origin",identifier:"O"},{key:"source",identifier:"S"},{key:"recordings",identifier:"D"},{key:"transcription",identifier:"Z"}],vt={methods:{TunesData_getMeta(e){return O.reduce((n,r)=>{const s=this.TunesData_getMetaFieldRegex(r),o=e.match(s);if(o&&o[1]){const c=o[1];n[r.key]===void 0?n[r.key]=[c]:n[r.key].push(c)}return n},{})},TunesData_getMetaFieldRegexInnerString(e){return`${e.identifier}: ?([\\w\\d=,':#/\\. ]*)`},TunesData_getMetaFieldRegex(e){return new RegExp(`^${this.TunesData_getMetaFieldRegexInnerString(e)}$`,"m")},TuneData_getMetaFieldRegexStringsByKeys(...e){return e.map(t=>this.TunesData_getMetaFieldRegexInnerString(O.filter(n=>n.key===t)[0]))}}};const xt={components:{TheNavMenu:L},mixins:[vt],provide(){return{tunes:this.tunes,context:this.context}},props:["tunesData","bus"],data(){return{tunes:[],context:{selectedTune:void 0,renderedTune:void 0,notationContainer:void 0,browserSupportsAudio:!0,synthController:void 0,userAction:!1,settings:{transpose:0,tabs:!1,tempoPercent:100,enableChords:!0,showTabs:!1,instrument:"FIDDLE"}},isNavMenuOpen:!1,audioService:void 0}},computed:{isFooterShown(){return!!this.context.renderedTune}},created(){this.$bus.on("selectTune",e=>{this.context.selectedTune=e}),this.$bus.on("setBrowserSupport",e=>{this.context.browserSupportsAudio=e}),this.$bus.on("setRenderedTune",e=>{this.context.renderedTune=e}),this.$bus.on("setNotationContainer",e=>{this.context.notationContainer=e}),this.$bus.on("setSynthController",e=>{this.context.synthController=e}),this.$bus.on("toggleChords",()=>{this.context.settings.enableChords=!this.context.settings.enableChords}),this.$bus.on("toggleTabs",()=>{this.context.settings.showTabs=!this.context.settings.showTabs}),this.$bus.on("setInstrument",e=>{this.context.settings.instrument=e}),this.$bus.on("setTranspose",e=>{this.context.settings.transpose=e})},mounted(){this.getTunes()},methods:{getTunes(){!this.tunesData||Object.entries(this.tunesData).forEach(e=>{const t=e[0],n=e[1],r=C(y({},this.TunesData_getMeta(n)),{fileName:t,abc:n});this.tunes.push(r)})}}},Ct={class:"position-relative h-100%"};function kt(e,t,n,r,s,o){const c=yt,u=L,d=g("router-view"),p=at;return a(),l(x,null,[h(c,{"is-menu-open":s.isNavMenuOpen,onToggleNavMenu:t[0]||(t[0]=m=>s.isNavMenuOpen=!s.isNavMenuOpen)},null,8,["is-menu-open"]),i("div",Ct,[h(u,{open:s.isNavMenuOpen,tunes:s.tunes,onHide:t[1]||(t[1]=m=>s.isNavMenuOpen=!1)},null,8,["open","tunes"]),i("main",{"font-sans":"",p:"x-4 y-10",text:"center gray-700 dark:gray-200 w-100%",class:f({"with-nav":s.isNavMenuOpen})},[h(d)],2),h(p)])],64)}var At=b(xt,[["render",kt],["__scopeId","data-v-144794fa"]]);const R=ie(),Tt={"./abc/Balfa Waltz.abc":`X:
T:Balfa Waltz
L:1/8
Q:1/4=120
M:3/4
K:Am
(3:2:2a2 g | "Am"(3:2:2a2 g (3:2:2e2 ^d e2 | a2 (3:2:2e2 a (3:2:2g2 e | (3age (3:2:1!slide!e3 (3edc | 
A2- (3:2:2A2 B (3:2:2c2 A | !slide!e2 !slide!e2 !slide!e2 | "E" e2- (3:2:2e2 a (3:2:2g2 e | (3age (3:2:1e3 (3edc | "Am" A4 ] `,"./abc/Cold Frosty Morning.abc":`X: 64
T: Cold Frosty Morning
N: irish and bluegrass
M: 4/4
L: 1/8
R: reel
K: Ador
|:EDEGA2A2|ABcde2(3DEF|GABAG2D2|GABcd2D2|
EDEGA2A2|ABcde2ed|cBAc BAGB|A4A4:|
|:edega2a2|abag e2ef|gfga gfef|gagfe2e2|
A2AAc2cc|d2dde2ee|cBAc BAGB|A4A4:|`,"./abc/capebretonfiddlerssocietyswelcometotheshetlandislands-3.abc":`X: 1
T: Cape Breton Fiddlers' Society's Welcome To The Shetland Islands, The
C: Willie Hunter
S: https://thesession.org/tunes/1048#setting21854
R: reel
M: 4/4
L: 1/8
K: Amaj
|:AF|EC~C2 ECB,C|A,B,CE FECE|FBBA BcBA|Bffe f2fg|
ac~c2 eA~A2|cBAF EC~C2|FGAF Egaf|ecBc A2:|
|:fg|ae~e2 efed|ce~e2 fece|bf~f2 fgfe|defd B2| 
[1 fg|ae~e2 efed|ce~e2 fece|fdge afed|cdBc A2 :|
[2 ed|cdBc ABGA|FGEF DECD|B,CDE FABc|defg a2||
`},w=se(At,{tunesData:Tt,bus:R}),wt=oe({history:re("/"),routes:ge});w.use(wt);w.config.globalProperties.$bus=R;w.mount("#app");export{vt as T,b as _};
